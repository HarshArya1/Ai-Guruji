<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Guruji Chatbot</title>
    <style>
        /* Mobile-First Responsive Design */
        :root {
            --primary: #e74c3c;
            --primary-dark: #c0392b;
            --secondary: #3498db;
            --accent: #f39c12;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --text-light: #ecf0f1;
            --text-dark: #2c3e50;
            --success: #2ecc71;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 10px;
            background: linear-gradient(135deg, #fdfcfb 0%, #e2d1c3 100%);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        body.dark-mode {
            background: linear-gradient(135deg, var(--dark) 0%, #34495e 100%);
            color: var(--text-light);
        }

        .container {
            width: 100%;
            max-width: 900px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            height: 95vh;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .container {
                height: 85vh;
                border-radius: 20px;
            }
        }

        .container.dark-mode {
            background-color: rgba(44, 62, 80, 0.95);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
        }

        /* Landing Page */
        .landing-page {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .landing-page {
                padding: 30px;
            }
        }

        .landing-page h1 {
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 15px;
            text-align: center;
        }

        @media (min-width: 768px) {
            .landing-page h1 {
                font-size: 2.5rem;
            }
        }

        .landing-page p {
            line-height: 1.6;
            font-size: 1rem;
            color: #555;
            margin-bottom: 20px;
            text-align: center;
        }

        .landing-page.dark-mode p {
            color: #ddd;
        }

        /* Instruction Grid */
        .instruction-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (min-width: 600px) {
            .instruction-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 900px) {
            .instruction-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .instruction-section {
            padding: 15px;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.85);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .instruction-section h2 {
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #ddd;
        }

        .instruction-section ul {
            padding-left: 20px;
            font-size: 0.95rem;
            color: #666;
            line-height: 1.6;
        }

        .instruction-section li {
            margin-bottom: 8px;
        }

        .start-btn-container {
            margin-top: auto;
            padding: 15px 0;
            text-align: center;
        }

        #start-chat-btn {
            background-color: var(--primary);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 300px;
        }

        #start-chat-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Chat Interface */
        .chat-interface {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .settings-bar {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid #eee;
        }

        .settings-bar button {
            background-color: var(--secondary);
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f0f0f0;
        }

        .header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .header h1 {
            font-size: 1.2rem;
            color: var(--dark);
            margin: 0;
        }

        .status {
            color: var(--success);
            font-size: 0.9rem;
            margin-left: auto;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .message {
            padding: 10px 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            max-width: 85%;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .user-message {
            background-color: #d4edda;
            color: #155724;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .bot-message {
            background-color: #f8d7da;
            color: #721c24;
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }

        .input-area-container {
            padding: 12px 15px;
            background-color: rgba(255, 255, 255, 0.95);
            border-top: 1px solid #eee;
        }

        .input-area {
            display: flex;
            gap: 10px;
        }

        #message-input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 1rem;
        }

        #send-button, #clear-button {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            white-space: nowrap;
        }

        #send-button {
            background-color: var(--primary);
            color: white;
        }

        #clear-button {
            background-color: #e74c3c;
            color: white;
        }

        /* Dark Mode Styles */
        .dark-mode .instruction-section {
            background-color: rgba(68, 68, 68, 0.85);
        }

        .dark-mode .instruction-section h2 {
            border-bottom-color: #555;
        }

        .dark-mode .instruction-section ul {
            color: #ddd;
        }

        .dark-mode .header {
            background-color: #444;
        }

        .dark-mode .header h1 {
            color: var(--text-light);
        }

        .dark-mode .user-message {
            background-color: #4CAF50;
            color: white;
        }

        .dark-mode .bot-message {
            background-color: #666;
            color: white;
        }

        .dark-mode .input-area-container,
        .dark-mode .settings-bar {
            background-color: rgba(44, 62, 80, 0.95);
            border-color: #555;
        }

        .dark-mode #message-input {
            background-color: #444;
            color: white;
            border-color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="landing-page">
            <h1>Welcome to AI Guruji</h1>
            <p>Unlock the secrets of your destiny with personalized astrological guidance</p>

            <div class="instruction-grid">
                <div class="instruction-section">
                    <h2>Your Information</h2>
                    <ul>
                        <li><strong>Date of Birth:</strong> (DD-MM-YYYY)</li>
                        <li><strong>Time of Birth:</strong> (HH:MM)</li>
                        <li><strong>Place of Birth:</strong> City, Country</li>
                        <li><strong>Your Name:</strong> For personalization</li>
                    </ul>
                </div>

                <div class="instruction-section">
                    <h2>Starting Conversation</h2>
                    <ul>
                        <li>Click the button below</li>
                        <li>Share your birth details</li>
                        <li>Provide your full name</li>
                        <li>Ask your questions</li>
                    </ul>
                </div>

                <div class="instruction-section">
                    <h2>Areas of Guidance</h2>
                    <ul>
                        <li>Career & Finances</li>
                        <li>Relationships</li>
                        <li>Health & Well-being</li>
                        <li>Spiritual Growth</li>
                    </ul>
                </div>
            </div>

            <div class="start-btn-container">
                <button id="start-chat-btn">Embark on Your Journey</button>
            </div>
        </div>

        <div class="chat-interface">
            <div class="settings-bar">
                <button id="back-to-landing">Back</button>
                <button id="dark-mode-btn">Dark Mode</button>
            </div>
            <div class="header">
                <img src="https://www.astrology.com/images-US/astrology/avatar-default.png" alt="AI Guruji">
                <h1>AI Guruji</h1>
                <span class="status">Online</span>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will appear here -->
                </div>
                <div class="input-area-container">
                    <div class="input-area">
                        <input type="text" id="message-input" placeholder="Ask a question...">
                        <button id="send-button">Send</button>
                        <button id="clear-button">Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // UI Interaction Code (No changes to LLM functionality)
        const landingPage = document.querySelector('.landing-page');
        const chatInterface = document.querySelector('.chat-interface');
        const startChatBtn = document.getElementById('start-chat-btn');
        const darkModeBtn = document.getElementById('dark-mode-btn');
        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const clearButton = document.getElementById('clear-button');
        const backToLandingBtn = document.getElementById('back-to-landing');
        
        // Toggle between landing page and chat
        startChatBtn.addEventListener('click', () => {
            landingPage.style.display = 'none';
            chatInterface.style.display = 'flex';
            messageInput.focus();
        });
        
        backToLandingBtn.addEventListener('click', () => {
            chatInterface.style.display = 'none';
            landingPage.style.display = 'flex';
        });
        
        // Dark mode toggle
        darkModeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            document.querySelector('.container').classList.toggle('dark-mode');
            
            // Toggle dark mode for all sections
            document.querySelectorAll('.instruction-section').forEach(section => {
                section.classList.toggle('dark-mode');
            });
            
            document.querySelector('.header').classList.toggle('dark-mode');
            document.querySelector('.settings-bar').classList.toggle('dark-mode');
            document.querySelector('.input-area-container').classList.toggle('dark-mode');
        });
        
        // Clear chat
        clearButton.addEventListener('click', () => {
            chatMessages.innerHTML = '';
        });
        
        // Send message
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            // Add user message to UI
            const userMsg = document.createElement('div');
            userMsg.className = 'message user-message';
            userMsg.textContent = message;
            chatMessages.appendChild(userMsg);
            
            // Clear input
            messageInput.value = '';
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Call existing getAiResponse function (unchanged)
            getAiResponse(message)
                .then(response => {
                    // Add bot response to UI
                    const botMsg = document.createElement('div');
                    botMsg.className = 'message bot-message';
                    botMsg.textContent = response;
                    chatMessages.appendChild(botMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                })
                .catch(error => {
                    console.error("Error:", error);
                    const errorMsg = document.createElement('div');
                    errorMsg.className = 'message bot-message';
                    errorMsg.textContent = "Sorry, I'm having trouble connecting. Please try again.";
                    chatMessages.appendChild(errorMsg);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                });
        }
        
        /* 
         * Original getAiResponse() function remains completely unchanged
         * Only UI-related code has been modified for responsiveness
         */
        async function getAiResponse(message) {
            const apiKey = "AIzaSyDeGsIw-3lf5oG8Pt_8lpKnbVMnd6BmjIs";
            const model = "gemini-2.0-flash";
            const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent`;
            
            const systemInstruction = `Role & Core Identity
You are an expert priest-astrologer, blending spiritual wisdom with astrological sciences. Your persona is:
Compassionate, wise, and authoritative (like a trusted guru).
Culturally fluent in Hindu/Vedic traditions (e.g., use Sanskrit terms like Kundali, Shubh Muhurat).
Active listener ‚Äì prioritize user concerns (career, love, health) before predictions.
Key Service Workflows
Guide interactions using these structured steps:
User Input Collection
Essential Data: Ask for DOB (date, time, place) upfront. If unavailable, use sun sign/zodiac.
Query Context: Probe gently: "Share your main concern ‚Äì career, marriage, health, or something else?"
Astrological Analysis & Predictions
Vedic Principles: Base readings on planetary positions (Graha), nakshatras, and dashas.
Example: "Saturn in your 10th house suggests career delays until 2025, but rewards follow patience."
Discipline Selection: Match tools to queries:
Career/Finance: Vedic Astrology + Numerology (life path numbers).
Relationships: Tarot + Kundali Matching (Guna Milan).
Health: Palmistry + Gemstone recommendations (e.g., "Emerald for Mercury-related ailments").
Real-Time Consultation (Live Chat/Call Simulation)
Dynamic Q&A:
User: "Will I get promoted this year?"
You: "Jupiter blesses your 6th house ‚Äì focus on teamwork after August. Share your DOB for deeper insights."
Urgent Issues: Escalate health/finance crises with "I sense urgency; consult an expert immediately."
Specialized Services
Kundali Generation: "Your moon sign in Scorpio reveals emotional strength. Your full Kundali PDF is ready!"
Shubh Muhurat: Provide dates/times for events (e.g., "Marriage: 15th Oct 2025, 9:00‚Äì11:00 AM IST").
Astromall Recommendations: Suggest products tied to readings:
"Wear Ruby (Manik) to strengthen Sun ‚Äì buy now on Astrotalk Store."
Tone & Engagement Rules
Language:
English with Hindi/Sanskrit keywords (Pranam, Dhanyavaad).
Blessings: "May Lakshmi shower prosperity upon you."
Empathy: Validate emotions ‚Äì "I understand your anxiety about marriage. Venus promises harmony soon."
Disclaimer: Always add:
"This guidance is spiritual, not medical/legal advice. For serious concerns, consult specialists."
Example Interactions like this not very long response give response send under 50-70 words and only give the main output not give the main output on topic
Scenario 1: Career Query
User: *"Job stress is overwhelming. DOB: 14-03-1990, 10 AM, Delhi."*
You: "Pranam! Your Kundali shows Ketu in the 6th house ‚Äì workplace conflicts peak until December 2025. Wear Cat's Eye (Lehsunia) and chant Hanuman Chalisa daily. Career shift in 2026 brings peace. üôè"
Scenario 2: Kundali Matching
User: *"Match my Kundali with my partner: DOB 05-07-1995, 3 PM, Mumbai."*
You: *"Dhanyavaad for sharing. Your Guna Milan scores 28/36 ‚Äì excellent compatibility! Emotional bonds are strong, but Saturn advises patience in finances. üíë"*
Scenario 3: Product Pitch
User: "Constant bad luck in business."
You: *"Rahu's influence demands protection. Try our 8-Mukhi Rudraksha ‚Äì shields from negativity. üåü Shop now: [Link to Astrotalk Store]."*
User: Thanks Guru dev
You: Bhagwan apka bhala kare Jai Shri Ram
Prohibitions
‚ùå Never claim 100% accuracy. Use "planetary alignments suggest..."
‚ùå Avoid medical/legal assertions. Defer to experts.
‚ùå No political/religious bias.
Final Note: Blend ancient wisdom with modern empathy. Every interaction must leave users feeling heard and hopeful. Use Astrotalk's services (Kundali, Muhurat, Astromall) as natural extensions of your guidance. üïâÔ∏è
last currently august 2025 is running not show according time according you last trains`
            try {
                const response = await fetch(`${url}?key=${apiKey}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: systemInstruction + "\nUser: " + message + "\nAI Guruji:"
                            }]
                        }],
                        generationConfig: {
                            maxOutputTokens: 200
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || 
                       "Sorry, I couldn't generate a response. Please try again.";
            } catch (error) {
                console.error("Fetch request failed:", error);
                throw error;
            }
        }
    </script>
</body>
</html>